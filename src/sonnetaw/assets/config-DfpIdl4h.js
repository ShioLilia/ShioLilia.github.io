(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();class b{constructor(){this.dict={},this.currentLanguage="en",this.customDict={}}async loadDictionary(t,e="en"){this.dict=t,this.currentLanguage=e,this.loadCustomDictionary()}loadCustomDictionary(){try{const t=localStorage.getItem(`customDict_${this.currentLanguage}`);t&&(this.customDict=JSON.parse(t),console.log(`Loaded ${Object.keys(this.customDict).length} custom words`))}catch(t){console.error("Failed to load custom dictionary:",t),this.customDict={}}}saveCustomDictionary(){try{localStorage.setItem(`customDict_${this.currentLanguage}`,JSON.stringify(this.customDict))}catch(t){console.error("Failed to save custom dictionary:",t)}}addCustomWord(t,e){const n=t.toLowerCase().replace(/[^a-z']/g,"");this.customDict[n]=[e],this.saveCustomDictionary()}getCurrentLanguage(){return this.currentLanguage}lookup(t){const e=t.toLowerCase().replace(/[^a-z']/g,"");if(this.customDict[e]?.length>0)return this.customDict[e][0];const n=this.dict[e];return!n||n.length===0?null:n[0]}getAllPronunciations(t){const e=t.toLowerCase().replace(/[^a-z']/g,"");if(this.customDict[e]?.length>0)return this.customDict[e];const n=this.dict[e];return!n||n.length===0?null:n}extractSyllables(t){const e=[];let n=[],s=0;for(const i of t){n.push(i);const o=i.match(/[012]$/);o&&(s=parseInt(o[0]),e.push({phonemes:n,stress:s}),n=[],s=0)}return n.length>0&&e.length>0&&e[e.length-1].phonemes.push(...n),e}extractRhymeKey(t){let e=-1;for(let n=t.length-1;n>=0;n--)if(t[n].match(/[012]$/)){e=n;break}return e===-1?"":t.slice(e).map(n=>n.replace(/[012]$/,"")).join("-")}estimateSyllables(t){return this.currentLanguage==="en"?this.estimateSyllablesEnglish(t):this.estimateSyllablesEnglish(t)}estimateSyllablesEnglish(t){const e=t.toLowerCase().replace(/[^a-z]/g,"");if(e.length===0)return 1;const n={are:1,were:1,where:1,here:1,there:1,fire:1,hour:1,our:1,your:1,through:1,though:1,thought:1,brought:1,sure:1,pure:1,cure:1,every:2,prayer:2,player:2,layer:2,being:2,seeing:2,doing:2,going:2,family:3,library:3,different:3,thee:1,thou:1,thy:1,thine:1,hath:1,doth:1,shalt:1,wilt:1,ere:1,oft:1,nigh:1,oer:1,eer:1,neer:1,tis:1,twas:1,twere:1};if(n[e])return n[e];let s=0;const i="aeiouy";let o=!1;for(let r=0;r<e.length;r++){const c=e[r],a=i.includes(c);a&&!o&&s++,o=a}if(e.endsWith("e")&&(s>1&&!e.match(/(le|re|ne|me|he|se|ze|ve|de|ge|te|ce|pe)$/)&&s--,e.match(/[^aeiou]le$/)),e.endsWith("ed")&&(e.match(/[dt]ed$/)||s--),e.endsWith("es")&&e.length>2){const r=e.slice(-3,-2);!"szx".includes(r)&&!e.endsWith("ches")&&!e.endsWith("shes")&&s--}if(e.match(/(tion|sion|cion)$/)&&s++,e.match(/(ious|eous)$/)&&s++,e.match(/(ia|iu|io)$/)&&e.length>3){const r=e[e.length-3];i.includes(r)||s++}const l=e.match(/[aeiouy]{3,}/g);if(l)for(const r of l);return Math.max(1,s)}createFallbackAnalysis(t){const e=this.estimateSyllables(t),n=[];let s=0;if(e===1)s=0;else if(e===2){const o=t.toLowerCase();o.match(/(ment|ness|less|ful|ly)$/)||o.match(/(tion|sion|ic)$/),s=0}else if(e>=3){const o=t.toLowerCase();o.match(/(tion|sion)$/)||o.match(/(ic|ical)$/)||o.match(/(ity|ety)$/)?s=Math.max(0,e-3):s=Math.min(1,e-1)}for(let o=0;o<e;o++){const l=o===s?1:0;n.push({phonemes:[],stress:l})}const i=t.length>=2?t.slice(-2).toLowerCase():t.toLowerCase();return{word:t.toLowerCase(),originalWord:t,syllables:n,rhymeKey:i,found:!1}}syllabifyWord(t,e){const n=t.toLowerCase(),s="aeiouy",i=[],o=[];for(let l=0;l<n.length;l++)s.includes(n[l])&&o.push(l);if(o.length===0||e.length===0)return[[0,t.length-1]];if(e.length!==o.length){const l=t.length/e.length;for(let r=0;r<e.length;r++){const c=Math.floor(r*l),a=r===e.length-1?t.length-1:Math.floor((r+1)*l)-1;i.push([c,a])}return i}for(let l=0;l<o.length;l++){const r=o[l];let c,a;if(l===0)c=0;else{const h=o[l-1],u=r-h-1;if(u===0)c=r;else if(u===1)c=h+1;else if(u===2)c=h+2;else if(u===3)c=h+3;else{const m=Math.floor(u/2);c=h+1+m}}if(l===o.length-1)a=t.length-1;else{const u=o[l+1]-r-1;if(u===0)a=r;else if(u===1)a=r;else if(u===2)a=r+1;else if(u===3)a=r+2;else{const m=Math.floor(u/2);a=r+m}}i.push([c,a])}return i}analyzeWord(t,e,n){const s=this.getAllPronunciations(t);if(!s||s.length===0)return this.createFallbackAnalysis(t);if(s.length===1){const c=s[0],a=this.extractSyllables(c),h=this.extractRhymeKey(c);return{word:t.toLowerCase(),originalWord:t,syllables:a,rhymeKey:h,found:!0}}let i=s[0],o=-1;for(const c of s){const a=this.extractSyllables(c);let h=0;n!==void 0&&(a.length===n?h+=10:h-=Math.abs(a.length-n)*2),e!==void 0&&a.length===1&&(a[0].stress===e?h+=5:e===1&&a[0].stress>0&&(h+=2)),h-=a.length*.5,h>o&&(o=h,i=c)}const l=this.extractSyllables(i),r=this.extractRhymeKey(i);return{word:t.toLowerCase(),originalWord:t,syllables:l,rhymeKey:r,found:!0}}}const y={devRepo:{owner:"Lilia",name:"sonnetaw",branch:"main"}},g={name:"Iambic Pentameter",description:"Unstressed-stressed pattern, 10 syllables per line",stressPattern:[0,1,0,1,0,1,0,1,0,1],syllableCount:10,type:"iambic"},d=[{id:"shakespearean",name:"Shakespearean Sonnet",description:"ABAB CDCD EFEF GG",rhymeScheme:["A","B","A","B","C","D","C","D","E","F","E","F","G","G"],meter:g,lineCount:14},{id:"petrarchan1",name:"Petrarchan Sonnet (CDECDE)",description:"ABBAABBA CDECDE",rhymeScheme:["A","B","B","A","A","B","B","A","C","D","E","C","D","E"],meter:g,lineCount:14},{id:"petrarchan2",name:"Petrarchan Sonnet (CDCDCD)",description:"ABBAABBA CDCDCD",rhymeScheme:["A","B","B","A","A","B","B","A","C","D","C","D","C","D"],meter:g,lineCount:14}],p=[{code:"en",name:"English",dictionaryFile:"eng-cmu.json",poeticForms:d}];function C(f,t){return`https://raw.githubusercontent.com/${f.owner}/${f.name}/${f.branch}/${t}`}function D(f){const t=p.find(e=>e.code===f);if(!t)throw new Error(`Unsupported language: ${f}`);return C(y.devRepo,`public/data/${t.dictionaryFile}`)}D("en");export{b as D,p as S,D as g};
//# sourceMappingURL=config-DfpIdl4h.js.map
